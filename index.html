<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LA Food Banks Map</title>

<link href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" rel="stylesheet" />
<script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>

<style>
  html, body, #map { height: 100%; margin: 0; }
  .pill {
    position: fixed; z-index: 2; left: 50%; transform: translateX(-50%); top: 12px;
    background: rgba(255,255,255,.85); backdrop-filter: blur(8px);
    border: 1px solid rgba(0,0,0,.06); border-radius: 14px; padding: 8px 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,.08); font: 14px system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  }
  .pill input[type="text"] { border: none; outline: none; background: transparent; width: 260px; }
  .pill button { border: 0; background: #111; color: #fff; border-radius: 999px; padding: 6px 10px; margin-left: 8px; cursor: pointer; }
  .switch {
    position: fixed; z-index: 2; right: 12px; top: 12px;
    background: rgba(255,255,255,.85); backdrop-filter: blur(8px);
    border: 1px solid rgba(0,0,0,.06); border-radius: 14px; padding: 8px 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,.08); font: 13px system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    display: flex; align-items: center; gap: 8px;
  }
  .legend {
    position: fixed; z-index: 2; right: 12px; bottom: 12px;
    background: rgba(255,255,255,.9); border: 1px solid rgba(0,0,0,.06);
    border-radius: 10px; padding: 8px 10px; box-shadow: 0 2px 10px rgba(0,0,0,.08);
    font: 12px/1.2 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    display: none;
  }
  .legend-row { display: flex; align-items: center; gap: 6px; margin: 3px 0; }
  .swatch { width: 12px; height: 12px; border-radius: 3px; border: 1px solid rgba(0,0,0,.2); }
  .loading-banner {
    position: fixed; z-index: 3; left: 12px; bottom: 12px;
    display: inline-flex; align-items: center; gap: 8px;
    border-radius: 10px; padding: 8px 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,.12);
    font: 13px system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    border: 1px solid rgba(15,23,42,0.15);
  }
  .loading-banner::before {
    content: "";
    width: 8px; height: 8px; border-radius: 50%;
  }
  .loading-banner[hidden] { display: none !important; }
  .loading-banner[data-state="loading"] {
    background: rgba(30,64,175,0.92);
    color: #f8fafc;
  }
  .loading-banner[data-state="loading"]::before {
    background: currentColor;
    box-shadow: 0 0 0 0 rgba(248,250,252,0.65);
    animation: pulse 1.2s ease-in-out infinite;
    opacity: 0.9;
  }
  .loading-banner[data-state="success"] {
    background: rgba(22,163,74,0.92);
    color: #f8fafc;
  }
  .loading-banner[data-state="success"]::before {
    background: currentColor;
    mask: radial-gradient(circle at 50% 50%, transparent 3px, black 3px);
  }
  .loading-banner[data-state="error"] {
    background: rgba(220,38,38,0.95);
    color: #fef2f2;
  }
  .loading-banner[data-state="error"]::before {
    background: currentColor;
  }
  .loading-banner[data-state="empty"] {
    background: rgba(15,23,42,0.85);
    color: #e2e8f0;
  }
  .loading-banner[data-state="empty"]::before {
    background: rgba(226,232,240,0.8);
  }
  @keyframes pulse {
    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(248,250,252,0.55); }
    70% { transform: scale(1.8); box-shadow: 0 0 0 6px rgba(248,250,252,0); }
    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(248,250,252,0); }
  }
</style>
</head>
<body>
<div id="map"></div>

<div class="switch">
  <input type="checkbox" id="toggle-choropleth" />
  <label for="toggle-choropleth">Homelessness by area</label>
</div>

<div id="areas-loading-status" class="loading-banner" data-state="loading" hidden>Loading area boundariesâ€¦</div>

<div id="legend" class="legend"></div>

<script defer src="gl-loader.js"></script>
</body>
</html>
